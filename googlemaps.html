
<!DOCTYPE html>
<html>
  <head>
    <title>Find Nearest Dermatologist</title>
    <style>
      #map {
        height: 90vh;
        width: 100%;
      }
    </style>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Skincare Information</title>
     <meta charset="utf-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
     <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
     <meta property="og:url" content="https:/www.zebraprep.com">
     <meta property="og:title" content="Zebra Prep">
     <meta property="og:image" content="assets/images/math.jpg">
     <meta property="og:description" content="Zebra Prep - Online classes to achieve success">
 
     <link rel="icon" href="assets/images/favicon.webp" id="light-scheme-icon">
     <link rel="icon" href="assets/images/favicon.webp" id="dark-scheme-icon">
 
     <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
     <link rel="stylesheet" href="assets/css/styles.css"></link>
     <link rel="stylesheet" href="modules/bootstrap.min.css">
 
     <script src="modules/jquery.min.js"></script>
     <script src="modules/bootstrap.min.js"></script>
     <script src="modules/jquery-canvas-sparkles.js"></script>
     <script src="modules/jquery-canvas-sparkles.min.js"></script>
     <script src="modules/aos.js"></script>
     <script src='modules/font-awesome.js'></script>
     <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
     <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
     <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
     <script src="assets/js/script.js"></script>
     <script src="assets/js/main.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBzYS2k19MZbAaIMnulwaGDelOa0jg7Bac&callback=initMap&libraries=places" async defer></script>

    <script>
      let map;
let center;

if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(function (position) {
    var userLocation = {
      lat: position.coords.latitude,
      lng: position.coords.longitude
    };

    // Set the map center to the user's location.
    map.setCenter(userLocation);

    // Add a marker for the user's location.
    var userMarker = new google.maps.Marker({
      position: userLocation, 
      map: map,
      title: 'Your Location'
    });

    // Now, call the function to find and display the nearest dermatologist.
    findPlaces(google.maps.LatLng, google.maps.LatLngBounds, userLocation); // Pass the userLocation variable.
  });
} else {
  alert('Geolocation is not supported by your browser.');
}


async function initMap() {
  const { Map } = await google.maps.importLibrary("maps");
  const { LatLng, LatLngBounds } = await google.maps.importLibrary("core");

  center = new google.maps.LatLng(33.777233, -84.3962967);
  map = new Map(document.getElementById("map"), {
    center: center,
    zoom: 14,
  });
  findPlaces(LatLng, LatLngBounds);
}

async function findPlaces(LatLng, LatLngBounds, userLocation) {
  const { Place } = await google.maps.importLibrary("places");
  //@ts-ignore
  const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");
  const request = {
    query: "Dermatologists in Atlanta",
    fields: [
      "displayName",
      "location",
      "businessStatus",
      "hasWheelchairAccessibleEntrance",
    ],
    language: "en-US",
    maxResultCount: 7,
    minRating: 3.2,
    region: "us",
    useStrictTypeFiltering: false,
  };
  //@ts-ignore
  const { places } = await Place.searchByText(request);
  const bound = new LatLngBounds();

  if (places.length) {
    console.log(places);
    places.forEach((place) => {
      const markerView = new AdvancedMarkerElement({
        map,
        position: place.location,
        title: place.displayName,
      });

      bound.extend(new LatLng(place.location));
      console.log(place);
    });
    map.setCenter(bound.getCenter());
  } else {
    console.log("No results");
  }
}

initMap();
  </script>
  </head>
  <nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-primary" style="background-color: #FEA1BE!important">
    <div class="container-fluid">
        <a style="margin-left: 1%;" class="navbar-brand"  href="/">
        <img  src="assets/images/logo.png" alt="" style="zoom: 17%;" class="d-inline-block align-text-top">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#ham" aria-controls="ham" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="ham">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link aria-current="page" href="/">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" aria-current="page" href="/about.html">General</a>
              </li>
                <li class="nav-item">
                  <a class="nav-link " aria-current="page" href="/demo.html">Demo</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active " aria-current="page" href="/googlemaps.html">Find a Dermatologist</a>
                </li>
            </ul>
        </div>
    </div>
  </nav>
  <body>
    <h1>Find Nearest Dermatologist</h1>
    <div id="map"></div>
  </body>
</html>


